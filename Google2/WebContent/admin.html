<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1">
<title>권한 설정</title>
<!-- Latest compiled and minified CSS -->
<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
<!-- jQuery library -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.2.0/jquery.min.js"></script>
<!-- Latest compiled JavaScript -->
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
<script type="text/javascript">
$(document).ready(function(){
	$.ajax({type: "POST",
		url : "/Google2/adminSelect.kkb",
		success : function(data){
				console.log(data);
				setUserList(data.userList);
				setAuthList(data.authList);
	   }
     });
});
function setUserList(data){
	var html = "";
	for(var i = 0; i < data.length; i++){
		html += '<a href="javascript:clickEvent(\'U\', \'' + data[i].ID + '\')" class="list-group-item auth">' + data[i].NAME + '</a>';
	}
	$("#userList").empty().html(html);
}
function setAuthList(data){
	var html = "";
	for(var i = 0; i < data.length; i++){
		html += '<a href="javascript:clickEvent()" class="list-group-item auth">' + data[i].AUTH_NAME + '</a>';
	}
	$("#authList").empty().html(html);
}
function setMappingList(data){
	var html = "";
	for(var i = 0; i < data.length; i++){
		html += '<tr>';
		html += '<td class="text-left">' + data[i].NAME + '</td>';
		html += '<td class="text-center">' + data[i].AUTH_NAME + '</td>';
		html += '<td class="text-center">' + data[i].MOD_DATE + '</td>';
		html += '</tr>';
	}
	$("#mappingList").empty().html(html);
}
function clickEvent(type, id){
	switch (type) {
	case "U":
		$.ajax({type: "POST",
			url : "AdminAction!mapping.kkb",
			data : {"userId": id},
			success : function(data){
					console.log(data);
					setMappingList(data.mappingList);
		   }
	     });
		break;

	default:
		console.log("clickEvent()");
		break;
	}
}
</script>
</head>
<body>
<div class="container">
	<div class="row">
	  <div class="col-sm-6">
		<h2>사용자</h2>
		<ul class="list-group" id="userList">
			<a href="javascript:clickEvent()" class="list-group-item auth">이름</a>
		</ul>
	  </div>
	  <div class="col-sm-6">
	  	<h2>권한</h2>
		<ul class="list-group" id="authList">
			<a href="javascript:clickEvent()" class="list-group-item auth">권한</a>
		</ul>
	  </div> 
	  <hr>
	  <div class="col-sm-12">
	  	<h2>권한 매핑 리스트</h2>
		<table class="table table-hover">
		    <thead>
		      <tr>
		        <th class="text-left">Name</th>
		        <th class="text-center">Auth</th>
		        <th class="text-center">date</th>
		      </tr>
		    </thead>
		    <tbody id="mappingList">
			    <tr>
					<td class="text-left">이름</td>
					<td class="text-center">권한</td>
					<td class="text-center">날짜</td>
				</tr>
		    </tbody>
		  </table>
	  </div>
	</div>
</div>
</body>
</html>